<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Latent Semantic Scaling (LSS) is a word embedding-based semisupervised algorithm
for document scaling."><title>Fit a Latent Semantic Scaling model — textmodel_lss • LSX</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit a Latent Semantic Scaling model — textmodel_lss"><meta property="og:description" content="Latent Semantic Scaling (LSS) is a word embedding-based semisupervised algorithm
for document scaling."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">LSX</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pkgdown/application.html">Application in research</a>
    <a class="dropdown-item" href="../articles/pkgdown/introduction.html">Introduction</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/koheiw/LSX/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fit a Latent Semantic Scaling model</h1>
      <small class="dont-index">Source: <a href="https://github.com/koheiw/LSX/blob/HEAD/R/textmodel.R" class="external-link"><code>R/textmodel.R</code></a></small>
      <div class="d-none name"><code>textmodel_lss.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Latent Semantic Scaling (LSS) is a word embedding-based semisupervised algorithm
for document scaling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">textmodel_lss</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for dfm</span></span>
<span><span class="fu">textmodel_lss</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">seeds</span>,</span>
<span>  terms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  slice <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"count"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  simil_method <span class="op">=</span> <span class="st">"cosine"</span>,</span>
<span>  engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RSpectra"</span>, <span class="st">"irlba"</span>, <span class="st">"rsvd"</span><span class="op">)</span>,</span>
<span>  auto_weight <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for fcm</span></span>
<span><span class="fu">textmodel_lss</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">seeds</span>,</span>
<span>  terms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  w <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  max_count <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"count"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  simil_method <span class="op">=</span> <span class="st">"cosine"</span>,</span>
<span>  engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rsparse"</span><span class="op">)</span>,</span>
<span>  auto_weight <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>a dfm or fcm created by <code><a href="https://quanteda.io/reference/dfm.html" class="external-link">quanteda::dfm()</a></code> or <code><a href="https://quanteda.io/reference/fcm.html" class="external-link">quanteda::fcm()</a></code></p></dd>


<dt>...</dt>
<dd><p>additional arguments passed to the underlying engine.</p></dd>


<dt>seeds</dt>
<dd><p>a character vector or named numeric vector that contains seed
words. If seed words contain "*", they are interpreted as glob patterns.
See <a href="https://quanteda.io/reference/valuetype.html" class="external-link">quanteda::valuetype</a>.</p></dd>


<dt>terms</dt>
<dd><p>a character vector or named numeric vector that specify words
for which polarity scores will be computed; if a numeric vector, words' polarity
scores will be weighted accordingly; if <code>NULL</code>, all the features of
<code><a href="https://quanteda.io/reference/dfm.html" class="external-link">quanteda::dfm()</a></code> or <code><a href="https://quanteda.io/reference/fcm.html" class="external-link">quanteda::fcm()</a></code> will be used.</p></dd>


<dt>k</dt>
<dd><p>the number of singular values requested to the SVD engine. Only used
when <code>x</code> is a <code>dfm</code>.</p></dd>


<dt>slice</dt>
<dd><p>a number or indices of the components of word vectors used to
compute similarity; <code>slice &lt; k</code> to further truncate word vectors; useful
for diagnosys and simulation.</p></dd>


<dt>weight</dt>
<dd><p>weighting scheme passed to <code><a href="https://quanteda.io/reference/dfm_weight.html" class="external-link">quanteda::dfm_weight()</a></code>. Ignored
when <code>engine</code> is "rsparse".</p></dd>


<dt>cache</dt>
<dd><p>if <code>TRUE</code>, save result of SVD for next execution with identical
<code>x</code> and settings. Use the <code>base::options(lss_cache_dir)</code> to change the
location cache files to be save.</p></dd>


<dt>simil_method</dt>
<dd><p>specifies method to compute similarity between features.
The value is passed to <code><a href="https://quanteda.io/reference/textstat_simil.html" class="external-link">quanteda.textstats::textstat_simil()</a></code>, "cosine" is
used otherwise.</p></dd>


<dt>engine</dt>
<dd><p>select the engine to factorize <code>x</code> to generate word vectors. Choose
from <code><a href="https://rdrr.io/pkg/RSpectra/man/svds.html" class="external-link">RSpectra::svds()</a></code>, <code><a href="https://rdrr.io/pkg/irlba/man/irlba.html" class="external-link">irlba::irlba()</a></code>, <code><a href="https://rdrr.io/pkg/rsvd/man/rsvd.html" class="external-link">rsvd::rsvd()</a></code>, and
<code><a href="https://rdrr.io/pkg/rsparse/man/GloVe.html" class="external-link">rsparse::GloVe()</a></code>.</p></dd>


<dt>auto_weight</dt>
<dd><p>automatically determine weights to approximate the
polarity of terms to seed words. See details.</p></dd>


<dt>include_data</dt>
<dd><p>if <code>TRUE</code>, fitted model includes the dfm supplied as <code>x</code>.</p></dd>


<dt>group_data</dt>
<dd><p>if <code>TRUE</code>, apply <code>dfm_group(x)</code> before saving the dfm.</p></dd>


<dt>verbose</dt>
<dd><p>show messages if <code>TRUE</code>.</p></dd>


<dt>w</dt>
<dd><p>the size of word vectors. Used only when <code>x</code> is a <code>fcm</code>.</p></dd>


<dt>max_count</dt>
<dd><p>passed to <code>x_max</code> in <code>rsparse::GloVe$new()</code> where cooccurrence
counts are ceiled to this threshold. It should be changed according to the
size of the corpus. Used only when <code>x</code> is a <code>fcm</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Latent Semantic Scaling (LSS) is a semisupervised document scaling
method. <code>textmodel_lss()</code> constructs word vectors from use-provided
documents (<code>x</code>) and weights words (<code>terms</code>) based on their semantic
proximity to seed words (<code>seeds</code>). Seed words are any known polarity words
(e.g. sentiment words) that users should manually choose. The required
number of seed words are usually 5 to 10 for each end of the scale.</p>
<p>If <code>seeds</code> is a named numeric vector with positive and negative values, a
bipolar LSS model is construct; if <code>seeds</code> is a character vector, a
unipolar LSS model. Usually bipolar models perform better in document
scaling because both ends of the scale are defined by the user.</p>
<p>A seed word's polarity score computed by <code>textmodel_lss()</code> tends to diverge
from its original score given by the user because it's score is affected
not only by its original score but also by the original scores of all other
seed words. If <code>auto_weight = TRUE</code>, the original scores are weighted
automatically using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">stats::optim()</a></code> to minimize the squared difference
between seed words' computed and original scores. Weighted scores are saved
in <code>seed_weighted</code> in the object.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Watanabe, Kohei. 2020. "Latent Semantic Scaling: A Semisupervised
Text Analysis Technique for New Domains and Languages", Communication
Methods and Measures. <a href="https://doi.org/10.1080/19312458.2020.1832976" class="external-link">doi:10.1080/19312458.2020.1832976</a>
.</p>
<p>Watanabe, Kohei. 2017. "Measuring News Bias: Russia's Official News Agency
ITAR-TASS' Coverage of the Ukraine Crisis" European Journal of
Communication. <a href="https://doi.org/10.1177/0267323117695735" class="external-link">doi:10.1177/0267323117695735</a>
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io" class="external-link">"quanteda"</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Package version: 3.2.5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Unicode version: 13.0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ICU version: 66.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Parallel computing: 4 of 4 threads used.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> See https://quanteda.io for tutorials and examples.</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"LSX"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download corpus</span></span></span>
<span class="r-in"><span><span class="va">corp</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="st">"https://bit.ly/2GZwLcN"</span>, <span class="st">"rb"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">}</span>,</span></span>
<span class="r-in"><span>   error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="va">e</span>,</span></span>
<span class="r-in"><span>   warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>   finally <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"corp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/quit.html" class="external-link">quit</a></span><span class="op">(</span><span class="st">"no"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">toks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus_reshape.html" class="external-link">corpus_reshape</a></span><span class="op">(</span><span class="va">corp</span>, <span class="st">"sentences"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_select</a></span><span class="op">(</span><span class="st">"^[\\p{L}]+$"</span>, valuetype <span class="op">=</span> <span class="st">"regex"</span>, padding <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dfmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="va">toks</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span>min_termfreq <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.seedwords.html">as.seedwords</a></span><span class="op">(</span><span class="va">data_dictionary_sentiment</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># SVD</span></span></span>
<span class="r-in"><span><span class="va">lss_svd</span> <span class="op">&lt;-</span> <span class="fu">textmodel_lss</span><span class="op">(</span><span class="va">dfmt</span>, <span class="va">seed</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">lss_svd</span><span class="op">)</span>, <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   superior   flirting  excellent visitation dedication       good     humour </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.13155587 0.12173367 0.11775988 0.11280701 0.10336445 0.10096614 0.09880631 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     hinges   menswear       nice      highs bernadette    gilford     julian </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.09686758 0.09634406 0.09474779 0.09357691 0.09341598 0.09227394 0.09113390 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  specialty      tepid   observer injunction   positive   listener </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.09087273 0.09082654 0.09002514 0.08903475 0.08826408 0.08797926 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_svd</span>, newdata <span class="op">=</span> <span class="va">dfmt</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> text120761.1 text120761.2 text120761.3 text120761.4 text120761.5 text120761.6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.9583329    0.1300070    1.6720468    0.5208033   -0.9270076    0.1614789 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_svd</span>, newdata <span class="op">=</span> <span class="va">dfmt</span>, min_n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="co"># more robust</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> text120761.1 text120761.2 text120761.3 text120761.4 text120761.5 text120761.6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1.3038419    0.1393459    2.3072114    0.6887440   -0.6426615    0.1835903 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dfmt_grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html" class="external-link">dfm_group</a></span><span class="op">(</span><span class="va">dfmt</span><span class="op">)</span> <span class="co"># group sentences</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sentiment on economy</span></span></span>
<span class="r-in"><span><span class="va">eco</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="textstat_context.html">textstat_context</a></span><span class="op">(</span><span class="va">toks</span>, <span class="st">'econom*'</span><span class="op">)</span>, <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lss_svd_eco</span> <span class="op">&lt;-</span> <span class="fu">textmodel_lss</span><span class="op">(</span><span class="va">dfmt</span>, <span class="va">seed</span>, terms <span class="op">=</span> <span class="va">eco</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_svd_eco</span>, newdata <span class="op">=</span> <span class="va">dfmt_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> text120761 text174574 text141269 text151432 text169265 text134827 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.7540268  2.3001292  0.3976127  0.2266591 -0.3749561  0.3671907 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sentiment on politics</span></span></span>
<span class="r-in"><span><span class="va">pol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="textstat_context.html">textstat_context</a></span><span class="op">(</span><span class="va">toks</span>, <span class="st">'politi*'</span><span class="op">)</span>, <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lss_svd_pol</span> <span class="op">&lt;-</span> <span class="fu">textmodel_lss</span><span class="op">(</span><span class="va">dfmt</span>, <span class="va">seed</span>, terms <span class="op">=</span> <span class="va">pol</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_svd_pol</span>, newdata <span class="op">=</span> <span class="va">dfmt_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  text120761  text174574  text141269  text151432  text169265  text134827 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.48447935  1.79613965  0.09528141 -1.07422468 -0.10760545 -0.83658239 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># modify hyper-parameters of existing model</span></span></span>
<span class="r-in"><span><span class="va">lss_svd_pol2</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.textmodel_lss.html">as.textmodel_lss</a></span><span class="op">(</span><span class="va">lss_svd_pol</span>, <span class="va">seed</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span>, terms <span class="op">=</span> <span class="va">pol</span>, slice <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_svd_pol2</span>, newdata <span class="op">=</span> <span class="va">dfmt_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  text120761  text174574  text141269  text151432  text169265  text134827 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.89925290 -0.81232153 -2.19564710  0.11160452 -1.69063750 -0.02687483 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># GloVe</span></span></span>
<span class="r-in"><span><span class="va">fcmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/fcm.html" class="external-link">fcm</a></span><span class="op">(</span><span class="va">dfmt</span>, tri <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lss_glov</span> <span class="op">&lt;-</span> <span class="fu">textmodel_lss</span><span class="op">(</span><span class="va">fcmt</span>, <span class="va">seed</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:10.016] epoch 1, loss 0.0822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:17.044] epoch 2, loss 0.0634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:23.932] epoch 3, loss 0.0574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:30.674] epoch 4, loss 0.0544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:39.164] epoch 5, loss 0.0526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:46.384] epoch 6, loss 0.0514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:34:53.273] epoch 7, loss 0.0505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:35:00.221] epoch 8, loss 0.0499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:35:07.243] epoch 9, loss 0.0493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO  [21:35:14.182] epoch 10, loss 0.0489</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss_glov</span>, newdata <span class="op">=</span> <span class="va">dfmt_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> text120761 text174574 text141269 text151432 text169265 text134827 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.3933700  0.8595003  0.2900752  0.6007621  0.6505581 -1.8600892 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kohei Watanabe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

