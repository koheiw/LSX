<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="LSX">
<title>Introduction to LSX • LSX</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Introduction to LSX">
<meta property="og:description" content="LSX">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">LSX</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../articles/pkgdown/application.html">Application in research</a>
    <a class="dropdown-item" href="../../articles/pkgdown/introduction.html">Introduction to LSX</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/koheiw/LSX/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to LSX</h1>
            <h3 data-toc-skip class="subtitle">Basics about Latent
Semantic Scaling</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/koheiw/LSX/blob/HEAD/vignettes/pkgdown/introduction.Rmd" class="external-link"><code>vignettes/pkgdown/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<p>This vignette aims to introduce you to basic and advanced usage of
the LSX package to perform Latent Semantic Scaling (Watanabe, 2021). It
is an semisupervised algorithm to estimate polarity of documents on a
user-defined scale (e.g. sentiment or hostility) without manually
labeled training set.</p>
<p>We perform LSS in two steps: (1) estimating polarity of words and (2)
predicting polarity of documents. In the first step, the algorithm
computes semantic similarity between user-provided seed words and other
words in the corpus to assign polarity scores to them. In the second
step, it computes polarity scores of documents by averaging the polarity
scores of words with weights proportional to their frequency in the
documents.</p>
<p>We will analyze a collection of articles published by the Russian
state media, Sputnik, in the examples below. From its website, all the
English-language articles that contain “ukraine” have been downloaded at
the end of 2022 and compiled as a corpus 8,063 documents. The website is
known as one of the main outlets of <a href="https://www.kcl.ac.uk/policy-institute/research-analysis/weaponising-news" class="external-link">disinformation</a>
by the Russian government.</p>
<div class="section level2">
<h2 id="preperation">Preperation<a class="anchor" aria-label="anchor" href="#preperation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">LSX</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Package version: 3.2.5</span></span>
<span><span class="co">#&gt; Unicode version: 13.0</span></span>
<span><span class="co">#&gt; ICU version: 66.1</span></span>
<span><span class="co">#&gt; Parallel computing: 4 of 4 threads used.</span></span>
<span><span class="co">#&gt; See https://quanteda.io for tutorials and examples.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>You can <a href="https://www.dropbox.com/s/5tlux53aukf3uqs/data_corpus_sputnik2022.rds?dl=1" class="external-link">download</a>
the corpus of Sputnik articles about Ukraine. You must segment the
documents into sentences using <code><a href="https://quanteda.io/reference/corpus_reshape.html" class="external-link">corpus_reshape()</a></code> to perform
LSS. This reshaping of the corpus allows LSS to accurately estimate
semantic similarity between words. Otherwise, you can follow the
standard procedure in pre-processing such as removing punctuation marks
and grammatical words (“stop words”).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"data_corpus_sputnik2022.rds"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/corpus_reshape.html" class="external-link">corpus_reshape</a></span><span class="op">(</span>to <span class="op">=</span> <span class="st">"sentences"</span><span class="op">)</span></span>
<span><span class="va">toks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span><span class="va">corp</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, remove_symbols <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>               remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>, remove_url <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">dfmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="va">toks</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/dfm_select.html" class="external-link">dfm_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-1-generic-sentiment">Example 1: generic sentiment<a class="anchor" aria-label="anchor" href="#example-1-generic-sentiment"></a>
</h2>
<p>The most basic usage of LSS is predicting the sentiment of documents.
You can estimate the sentiment of all the articles in the corpus only by
running a few commands in the LSX package.</p>
<div class="section level3">
<h3 id="estimate-the-polarity-of-words">Estimate the polarity of words<a class="anchor" aria-label="anchor" href="#estimate-the-polarity-of-words"></a>
</h3>
<p><code>data_dictionary_sentiment</code> is the built-in dictionary of
sentiment seed words. <code><a href="../../reference/as.seedwords.html">as.seedwords()</a></code> converts the
dictionary object to a named numeric vector, in which numbers indicate
seed words’ polarity (positive or negative).</p>
<p>Taking the DFM and the seed words as the only inputs,
<code><a href="../../reference/textmodel_lss.html">textmodel_lss()</a></code> computes the polarity scores of all the
words in the corpus based on their semantic similarity to the seed
words. You usually do not need to change the value of <code>k</code>
(300 by default).</p>
<p>When both <code>include_data</code> and <code>group_data</code> are
<code>TRUE</code> (both <code>FALSE</code> by default), it internally
applies <code><a href="https://quanteda.io/reference/dfm_group.html" class="external-link">dfm_group()</a></code> to <code>x</code> to group the
sentences into the original documents, effectively reversing the
segmentation by <code><a href="https://quanteda.io/reference/corpus_reshape.html" class="external-link">corpus_reshape()</a></code>, and save a grouped DFM in
the LSS object as <code>lss$data</code>.</p>
<p>You are encourage to use the caching mechanism to speed up the
execution of the function from the second time. If
<code>cache = TRUE</code>, an intermediate object is saved in a folder
<code>lss_cache</code> in the working directory. You can delete old
cache files if they are taking too much space in the storage.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/as.seedwords.html">as.seedwords</a></span><span class="op">(</span><span class="va">data_dictionary_sentiment</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span></span>
<span><span class="co">#&gt;        good        nice   excellent    positive   fortunate     correct </span></span>
<span><span class="co">#&gt;           1           1           1           1           1           1 </span></span>
<span><span class="co">#&gt;    superior         bad       nasty        poor    negative unfortunate </span></span>
<span><span class="co">#&gt;           1          -1          -1          -1          -1          -1 </span></span>
<span><span class="co">#&gt;       wrong    inferior </span></span>
<span><span class="co">#&gt;          -1          -1</span></span>
<span><span class="va">lss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/textmodel_lss.html">textmodel_lss</a></span><span class="op">(</span><span class="va">dfmt</span>, seeds <span class="op">=</span> <span class="va">seed</span>, k <span class="op">=</span> <span class="fl">300</span>, cache <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                     include_data <span class="op">=</span> <span class="cn">TRUE</span>, group_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>You can visualize the polarity of words using
<code><a href="../../reference/textplot_terms.html">textplot_terms()</a></code>. When <code>highlighted = NULL</code>, it
randomly samples 50 words and highlights them.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/textplot_terms.html">textplot_terms</a></span><span class="op">(</span><span class="va">lss</span>, highlighted <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-5-1.png" width="760"></p>
<p>You can also manually specify which words (or emoji) to highlight.
You can pass glob patterns to <code>highlighted</code> if you want.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emoji</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/featnames.html" class="external-link">featnames</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/dfm_select.html" class="external-link">dfm_select</a></span><span class="op">(</span><span class="va">dfmt</span>, <span class="st">"^\\p{Emoji_Presentation}+$"</span>, valuetype <span class="op">=</span> <span class="st">"regex"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/textplot_terms.html">textplot_terms</a></span><span class="op">(</span><span class="va">lss</span>, highlighted <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">emoji</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-6-1.png" width="760"></p>
</div>
<div class="section level3">
<h3 id="predict-the-polarity-of-documents">Predict the polarity of documents<a class="anchor" aria-label="anchor" href="#predict-the-polarity-of-documents"></a>
</h3>
<p>Yon can compute the polarity scores of documents using
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>. The best workflow is copying document variables
from the DFM in the LSS object and adding the predicted polarity scores
as a new variable in the data frame.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">lss</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">lss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8063</span></span></code></pre></div>
<p>To visualize the polarity of documents, you need to smooth their
scores using <code><a href="../../reference/smooth_lss.html">smooth_lss()</a></code>. The plot shows that the
sentiment of the articles about Ukraine became more negative in March
but more positive in April. Zero on the Y-axis is the overall mean of
the score; the dotted vertical line indicate the beginning of the
war.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/smooth_lss.html">smooth_lss</a></span><span class="op">(</span><span class="va">dat</span>, lss_var <span class="op">=</span> <span class="st">"lss"</span>, date_var <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">smo</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">fit</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">fit</span> <span class="op">-</span> <span class="va">se.fit</span> <span class="op">*</span> <span class="fl">1.96</span>, ymax <span class="op">=</span> <span class="va">fit</span> <span class="op">+</span> <span class="va">se.fit</span> <span class="op">*</span> <span class="fl">1.96</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-02-24"</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">"months"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Sentiment about Ukraine"</span>, x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Sentiment"</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-9-1.png" width="760"></p>
</div>
</div>
<div class="section level2">
<h2 id="example-2-natos-hostility">Example 2: NATO’s hostility<a class="anchor" aria-label="anchor" href="#example-2-natos-hostility"></a>
</h2>
<p>You can measure more specific concepts if you train LSS with custom
seed words. Adopting seed words from my earlier study on geopolitical
threat (Trubowitz &amp; Watanabe,2021), we estimate the NATO’s hostility
expressed in the Sputnik articles. You can <a href="https://github.com/koheiw/LSX/tree/master/vignettes" class="external-link">download</a>
the dictionary file from the Github repository.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dictionary.html" class="external-link">dictionary</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"dictionary.yml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dict</span><span class="op">$</span><span class="va">hostility</span><span class="op">)</span></span>
<span><span class="co">#&gt; Dictionary object with 2 key entries.</span></span>
<span><span class="co">#&gt; - [hostile]:</span></span>
<span><span class="co">#&gt;   - adversary, adversaries, enemy, enemies, foe, foes, hostile</span></span>
<span><span class="co">#&gt; - [friendly]:</span></span>
<span><span class="co">#&gt;   - aid, aids, friends, friend, ally, allies, peaceful</span></span></code></pre></div>
<div class="section level3">
<h3 id="estimate-the-polarity-of-words-1">Estimate the polarity of words<a class="anchor" aria-label="anchor" href="#estimate-the-polarity-of-words-1"></a>
</h3>
<p>To target the NATO’s hostility, you should assign polarity scores
only to words that occur around “nato” as its modifiers. You can collect
such words using <code><a href="../../reference/textstat_context.html">char_context()</a></code> and pass them to
<code><a href="../../reference/textmodel_lss.html">textmodel_lss()</a></code> through <code>terms</code>.
<code>group_data</code> is set to <code>FALSE</code> because we want to
analyze each sentence in this example. Note that
<code><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove()</a></code> is used to exclude county and city names
from the polarity words (otherwise “sweden” and “finland” become strong
polarity words).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seed2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/as.seedwords.html">as.seedwords</a></span><span class="op">(</span><span class="va">dict</span><span class="op">$</span><span class="va">hostility</span><span class="op">)</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove</a></span><span class="op">(</span><span class="va">toks</span>, <span class="va">dict</span><span class="op">$</span><span class="va">country</span>, padding <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../../reference/textstat_context.html">char_context</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"nato"</span>, p <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="va">lss2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/textmodel_lss.html">textmodel_lss</a></span><span class="op">(</span><span class="va">dfmt</span>, seeds <span class="op">=</span> <span class="va">seed2</span>, terms <span class="op">=</span> <span class="va">term</span>, cache <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                      include_data <span class="op">=</span> <span class="cn">TRUE</span>, group_data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Since we have selected NATO-related terms for the LSS model, words in
the plot are fewer than the first example.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/textplot_terms.html">textplot_terms</a></span><span class="op">(</span><span class="va">lss2</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-12-1.png" width="760"></p>
</div>
<div class="section level3">
<h3 id="predict-the-polarity-of-documents-1">Predict the polarity of documents<a class="anchor" aria-label="anchor" href="#predict-the-polarity-of-documents-1"></a>
</h3>
<p>We should compute the polarity scores of documents using
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> with <code>min_n</code> to avoid short sentences
to receive extremely large negative or positive scores (i.e. outliers).
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> tends to return extreme scores for short
sentences because it computes the polarity of documents based on the
polarity of words weighted by their frequency. To prevent a small number
of words from determining the document scores, we set
<code>min_n = 10</code>, which is roughly the first quantile of the
sentence lengths.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">lss2</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/ntoken.html" class="external-link">ntoken</a></span><span class="op">(</span><span class="va">lss2</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   0%  25%  50%  75% 100% </span></span>
<span><span class="co">#&gt;    0    9   14   20  261</span></span>
<span><span class="va">dat2</span><span class="op">$</span><span class="va">lss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lss2</span>, min_n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 150459</span></span></code></pre></div>
<p>You can use <code><a href="../../reference/smooth_lss.html">smooth_lss()</a></code> to visualize the scores, but
<code>engine</code> should be “<a href="https://cran.r-project.org/package=locfit" class="external-link">locfit</a>” when the
data frame has more than 10 thousands scores.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smo2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/smooth_lss.html">smooth_lss</a></span><span class="op">(</span><span class="va">dat2</span>, lss_var <span class="op">=</span> <span class="st">"lss"</span>, date_var <span class="op">=</span> <span class="st">"date"</span>, engine <span class="op">=</span> <span class="st">"locfit"</span><span class="op">)</span></span></code></pre></div>
<p>The plot clearly shows that the NATO’s hostility expressed in the
Sputnik articles surged in response to Sweden’s and Finland’s decisions
to join the alliance on May 16 and 17, respectively.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">smo2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">fit</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">fit</span> <span class="op">-</span> <span class="va">se.fit</span> <span class="op">*</span> <span class="fl">1.96</span>, ymax <span class="op">=</span> <span class="va">fit</span> <span class="op">+</span> <span class="va">se.fit</span> <span class="op">*</span> <span class="fl">1.96</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-05-16"</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">"months"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"NATO's hostility"</span>, x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Hostility"</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-15-1.png" width="760"></p>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<ul>
<li>Trubowitz, P., &amp; Watanabe, K. (2021). The Geopolitical Threat
Index: A Text-Based Computational Approach to Identifying Foreign
Threats. <em>International Studies Quarterly</em>, <a href="https://doi.org/10.1093/isq/sqab029" class="external-link uri">https://doi.org/10.1093/isq/sqab029</a>.</li>
<li>Watanabe, K. (2021). Latent Semantic Scaling: A Semisupervised Text
Analysis Technique for New Domains and Languages, <em>Communication
Methods and Measures</em>, <a href="https://doi.org/10.1080/19312458.2020.1832976" class="external-link uri">https://doi.org/10.1080/19312458.2020.1832976</a>.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kohei Watanabe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
